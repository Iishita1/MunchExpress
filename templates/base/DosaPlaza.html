<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../static/css/menu.css">
    <script src="../static/js/script.js" defer></script>
    <link rel="stylesheet" href="../static/css/header.css">
    <style>
        
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f8f8f8; }
         .restro-name {
            margin: 0;
            margin-left: 30px;
            font-size: 40px;
            
            font-style: oblique;
            font-family:Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
            font-weight: bold;
            color: #1e0000;
            /* text-shadow: 0 0 5px rgba(55, 74, 55, 0.9), 0 0 15px rgba(211, 244, 211, 0.7); */
        }
        
        
         /* .search-bar {  padding: 10px; border: 2px solid #ccc; border-radius: 20px; transition: border 0.3s; font-size: 16px;width: 800px; margin-top: 5px; margin-left: 500px;Adjust spacing} */
         .searchBar {
            margin-left: auto;
            position: relative;
            border: 2px solid black;
            border-radius: 17px;
            width: 600px;
        }
        
        .search-input {
            background: rgba(255, 255, 255, 0.1);
            width: 100%;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 17px;
            color: rgb(0, 0, 0);
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.15);
        }
        
        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-top: 0.5rem;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
        }
        
        .search-item {
            padding: 1rem;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background-color 0.2s;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .search-item:hover {
            background-color: #f8f8f8;
        }
        
        .search-item .item-details h4 {
            margin: 0;
            font-weight: 500;
        }
        
        .search-item .item-meta {
            font-size: 0.8rem;
            color: #666;
        }
        
        .search-item .item-price {
            color: #000;
            font-weight: 500;
        }
        
        .no-results {
            padding: 1rem;
            text-align: center;
            color: #666;
        }
        
        .loading-text {
            padding: 1rem;
            text-align: center;
            color: #666;
        }
        
        .banner { width: 95%; height: 500px; border-radius: 30px; margin-left: 40px; display: flex; overflow: hidden; justify-content: center; align-items: center; margin-top: 83px;}
        /* .header { display: flex; align-items: center; padding: 10px; background-color: #fff; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); } */
        .logo { width: 110px; height: 110px; border-radius: 70px;   }
        /* .search-bar {  margin-right: 1500px;margin-top: 80px;padding: 10px; border: 1px solid #ccc; border-radius: 20px; transition: border 0.3s; font-size: 16px;width: 800px; } */
        .menu-container { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; padding: 20px; }
        .menu-item { background: white; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); overflow: hidden; width: 300px; }
        .menu-item img { width: 100%; height: 300px; object-fit: cover; }
        .menu-info { padding: 15px; }
        /* .h2 { font-size: 24px; margin: 0; margin-bottom: 70px;} */
        .menu-title { font-size: 18px; font-weight: bold; }
        .menu-price { color: rgb(29, 46, 42); font-size: 18px; margin: 10px 0; }
        .add-btn { background-color: #0d0c0c; color: white; padding: 10px; text-align: center; border-radius: 5px; cursor: pointer; }
        .filter-buttons { margin: 20px; display: flex; }
        .filter-buttons button {
            margin-left: 10px;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            background-color: #000000;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: bold;
            font-size: 16px;
        }
        
        .filter-buttons button:hover {
            background-color: #000000;
        }
        .filter-buttons button.veg {
            background-color: green;
            color: white;
        }
        .filter-buttons button.non-veg {
            background-color: red;
            color: white;
        }
        .search-filter-container { display: flex; align-items: center; margin-right: 620px; }
        
        
            #floating-cart-button {
                position: fixed;
                bottom: 20px;
                right: 20px;
                background-color: #09d36b; /* Green */
                border: none;
                border-radius: 50%;
                width: 60px;
                height: 60px;
                display: flex;
                justify-content: center;
                align-items: center;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                cursor: pointer;
            }
            
            #cart-icon {
                color: white;
                width: 30px;
                height: 30px;
            }
            
            #cart-count {
                position: absolute;
                top: -5px;
                right: -5px;
                background: red;
                color: white;
                font-size: 14px;
                font-weight: bold;
                border-radius: 50%;
                padding: 3px 7px;
                display: none; /* Hide when 0 */
            }
            
            </style>
    
    <title>DosaPLaza Menu</title>
  
</head>
<body>
    {% include 'base/menu_header.html' %}
   </nav>
    <div class="banner-container">
        <img src="https://www.architectandinteriorsindia.com/cloud/2021/11/15/Story-3-1.gif" alt="Restaurant Banner" class="banner">
    </div>
    <div class="header">
        <!-- <img src=""  class="logo">  -->
        <div class="header-content">
            <h2 class="restro-name">Dosa Plaza</h2>
            <div class="search-filter-container">
                <div class="searchBar">
                    <input type="text" class="search-input" placeholder="Search in Restaurant" oninput="handleSearchInput(event)">
                    <div class="search-results"></div>
                </div>
                <div class="filter-buttons">
                    <button onclick="filterMenu('all')">All</button>
                    <button class="veg" onclick="filterMenu('veg')">Veg</button>
                    <button class="non-veg" onclick="filterMenu('non-veg')">Non-Veg</button>
                    
                </div>
            </div>
        </div>
    </div>

    
    <div class="menu-container">
        <div class="menu-item veg">
            <img src="https://kannanskitchen.com/wp-content/uploads/2021/04/DSC_1079_1.jpg" alt="Chole Bhature">
            <div class="menu-info">
                <div class="menu-title">Masala Dosa</div>
                <p>Authentic taste of Hyderabad with a modern touch.</p>
                <div class="menu-price">₹149</div>
                <div class="info">
                    <div class="add-btn" onclick="addToCart('Masala Dosa', 149)">Add +</div>
                </div>
            </div>
        </div>
        <!-- <div class="menu-item veg">
            <img src="https://t4.ftcdn.net/jpg/04/18/22/71/360_F_418227121_mGoGy7ZE2jAkq07OnN599QU7PVuhVT57.jpg" alt="Cheesy Paneer Tikka">
            <div class="menu-info">
                <div class="menu-title">Cheese Dosa</div>
                <div class="menu-price">₹199</div>
                <div class="info">
                    <div class="add-btn" onclick="addToCart('Cheese Dosa', 199)">Add +</div>
                </div>
            </div>
        </div> -->
        <div class="menu-item veg">
            <img src="https://t3.ftcdn.net/jpg/01/61/13/66/360_F_161136674_NgVFcPtWfwLPY03NpJUrSiH9oDvma9Rn.jpg" alt="Chole Bhature">
            <div class="menu-info">
                <div class="menu-title">Plain Idli</div>
                <p>Authentic taste of South with a modern touch.</p>
                <div class="menu-price">₹499</div>
                <div class="info">
                    <div class="add-btn" onclick="addToCart('Chole Bhature', 499)">Add +</div>
                </div>
            </div>
        </div>
        <div class="menu-item veg">
            <img src="https://cookilicious.com/wp-content/uploads/2016/06/Mini-Masala-Idli-5.jpg" alt="Cheesy Paneer Tikka">
            <div class="menu-info">
                <div class="menu-title">Masala Idli</div>
                <p>South India's most loved dish with a aesthetic look.</p>
                <div class="menu-price">₹669</div>
                <div class="info">
                    <div class="add-btn" onclick="addToCart('Rajma Chawal', 669)">Add +</div>
                </div>
            </div>
        </div>
        <div class="menu-item veg">
            <img src="https://t3.ftcdn.net/jpg/11/19/61/12/360_F_1119611210_HILd0dQ1VtzSn3L8z5wHjxII9Nlh7NJl.jpg" alt="Cheesy Mexican">
            <div class="menu-info">
                <div class="menu-title">Vada Sambhar</div>
                <p>Old taste.Modern look with the same authentic taste</p>
                <div class="menu-price">₹459</div>
                <div class="info">
                    <div class="add-btn" onclick="addToCart('Amritsari Kulcha', 459)">Add +</div>
                </div>
            </div>
        </div>
        <div class="menu-item veg">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTK63B0GlU6SASc3EXBh3Ip3pKRKqASVEzrIg&s" alt="Cheesy American BBQ">
            <div class="menu-info">
                <div class="menu-title">Plain Dosa</div>
                <p>Health+Taste</p>
                <div class="menu-price">₹159</div>
                <div class="info">
                    <div class="add-btn" onclick="addToCart('Palak Paneer', 159)">Add +</div>
                </div>
            </div>
        </div>
        <!-- <div class="menu-item non-veg">
            <img src="https://www.licious.in/blog/wp-content/uploads/2022/06/mutton-hyderabadi-biryani-01.jpg" alt="Cheesy Chicken Tikka">
            <div class="menu-info">
                <div class="menu-title">Handi Biryani</div>
                <p>Hyderabadi Biryani.</p>
                <div class="menu-price">₹289</div>
                <div class="info">
                    <div class="add-btn" onclick="addToCart('Butter Chicken', 289)">Add +</div>
                </div>
            </div>
        </div> -->
        <div class="menu-item non-veg">
            <img src="https://i.pinimg.com/736x/20/92/48/2092483fde63dc2c9e3f2a0038c8af1f.jpg" alt="Chicken Keema Melt">
            <div class="menu-info">
                <div class="menu-title">Non Veg Thali</div>
                <p>Special non veg thali.</p>
                <div class="menu-price">₹1299</div>
                <div class="info">
                    <div class="add-btn" onclick="addToCart('Fish Tikka', 1299)">Add +</div>
                </div>
            </div>
        </div>
        <div class="menu-item non-veg">
            <img src="https://thecozycook.com/wp-content/uploads/2024/01/Chicken-Roulade-1-1.jpg" alt="Cheesy Lamb Pepperoni">
            <div class="menu-info">
                <div class="menu-title">Chicken Roulade</div>
                <p>Hot chicken with elegent flavours</p>
                <div class="menu-price">₹399</div>
                <div class="info">
                    <div class="add-btn" onclick="addToCart('Chicken Tikka', 399)">Add +</div>
                </div>
            </div>
        </div>
        <div class="menu-item non-veg">
            <img src="https://drop.ndtv.com/albums/COOKS/5-non-veg-south_637945968901459445/637945968925794905.jpeg" alt="Egg'n Chicken Melt">
            <div class="menu-info">
                <div class="menu-title">Chicken Channet</div>
                <p>Chicken with South Indian flavours</p>
                <div class="menu-price">₹199</div>
                <div class="info">
                    <div class="add-btn" onclick="addToCart('Kerala Chicken Roast', 199)">Add +</div>
                </div>
            </div>
        </div>
        <div class="menu-item veg">
            <img src="https://t3.ftcdn.net/jpg/04/19/77/14/360_F_419771473_T13jOSeb0aBECVw1ekoQO3d0R4hxFHMY.jpg" alt="Cheesy American BBQ">
            <div class="menu-info">
                <div class="menu-title">Veg Sambhar</div>
                <p>Health+Taste</p>
                <div class="menu-price">₹559</div>
                <div class="info">
                    <div class="add-btn" onclick="addToCart('Makke di Roti,Sarson da Saag', 559)">Add +</div>
                </div>
            </div>
        </div>
        <div class="menu-item non-veg">
            <img src="https://static.vecteezy.com/system/resources/previews/038/972/486/non_2x/ai-generated-chicken-korma-isolated-on-white-indian-cuisine-meat-curry-dish-with-coconut-milk-masala-asian-food-photo.jpg" alt="Cheesy Chicken Tikka">
            <div class="menu-info">
                <div class="menu-title">Chicken Korma</div>
                <p>Indian pepper chicken</p>
                <div class="menu-price">₹579</div>
                <div class="info">
                    <div class="add-btn" onclick="addToCart('Chettinad Chicken', 579)">Add +</div>
                </div>
            </div>
        </div>
        <div class="menu-item veg">
            <img src="https://kajabi-storefronts-production.kajabi-cdn.com/kajabi-storefronts-production/file-uploads/blogs/32599/images/1d6186b-d38e-ae6b-117-10771d4ecdb_img_67_urad-dal-rice-uttapam-or-dosa_1534142211.jpg" alt="Cheesy American BBQ">
            <div class="menu-info">
                <div class="menu-title">Urad Dal Rice Uttapam</div>
                <p>Authentic sout indian taste.</p>
                <div class="menu-price">₹669</div>
                <div class="info">
                    <div class="add-btn" onclick="addToCart('Aaloo Parantha', 669)">Add +</div>
                </div>
            </div>
        </div>
        <div class="menu-item non-veg">
            <img src="https://drop.ndtv.com/albums/COOKS/5-non-veg-south_637945968901459445/637945968925794905.jpeg" alt="Cheesy Chicken Tikka">
            <div class="menu-info">
                <div class="menu-title">Chetinad Fish</div>
                <p>South Indian special</p>
                <div class="menu-price">₹499</div>
                <div class="info">
                    <div class="add-btn" onclick="addToCart('Masala Dosa', 499)">Add +</div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/feather-icons"></script>
    <button id="floating-cart-button" style="position:fixed; bottom:20px; right:20px; background-color:transparent; border:none; border-radius:50%; padding:15px; box-shadow:0 4px 8px rgba(0,0,0,0.2);">
        <i data-feather="shopping-cart" style="color: green;"></i>
    </button>
    <script src="script.js"></script>
    <button id="floating-cart-button" onclick="redirectToCart()">
        <i data-feather="shopping-cart" id="cart-icon"></i>
        <span id="cart-count">0</span>
    </button>
    <script>
        function handleSearchInput(event) {
            const searchQuery = event.target.value.toLowerCase().trim();
            const searchResults = document.querySelector('.search-results');
            const menuItems = document.querySelectorAll('.menu-item');
            
            // Clear previous results
            searchResults.innerHTML = '';
            
            if (searchQuery.length < 2) {
                searchResults.style.display = 'none';
                menuItems.forEach(item => item.style.display = 'block');
                return;
            }
            
            // Show loading state
            searchResults.style.display = 'block';
            searchResults.innerHTML = '<div class="loading-text">Searching...</div>';
            
            // Filter and display results
            setTimeout(() => {
                const filteredItems = Array.from(menuItems).filter(item => {
                    const title = item.querySelector('.menu-title').textContent.toLowerCase();
                    const description = item.querySelector('.menu-info').textContent.toLowerCase();
                    return title.includes(searchQuery) || description.includes(searchQuery);
                });
                
                if (filteredItems.length > 0) {
                    searchResults.innerHTML = filteredItems.map(item => {
                        const title = item.querySelector('.menu-title').textContent;
                        const price = item.querySelector('.menu-price').textContent;
                        const isVeg = item.classList.contains('veg');
                        
                        return `
                            <div class="search-item" onclick="scrollToItem(this)">
                                <div class="item-details">
                                    <h4>${title}</h4>
                                    <div class="item-meta">${isVeg ? 'Veg' : 'Non-Veg'}</div>
                                </div>
                                <div class="item-price">${price}</div>
                            </div>
                        `;
                    }).join('');
                } else {
                    searchResults.innerHTML = '<div class="no-results">No items found matching your search</div>';
                }
            }, 500);
        }

        function scrollToItem(element) {
            const searchQuery = document.querySelector('.search-input').value.toLowerCase();
            const menuItems = document.querySelectorAll('.menu-item');
            
            // Find the matching item
            const matchingItem = Array.from(menuItems).find(item => {
                const title = item.querySelector('.menu-title').textContent.toLowerCase();
                return title === element.querySelector('h4').textContent.toLowerCase();
            });
            
            if (matchingItem) {
                // Scroll to the item
                matchingItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                // Add highlight effect
                matchingItem.style.backgroundColor = '#f8f8f8';
                setTimeout(() => {
                    matchingItem.style.backgroundColor = '';
                }, 2000);
            }
            
            // Clear search and hide results
            document.querySelector('.search-input').value = '';
            document.querySelector('.search-results').style.display = 'none';
        }

        // Close search results when clicking outside
        document.addEventListener('click', (e) => {
            const searchBar = document.querySelector('.searchBar');
            const searchResults = document.querySelector('.search-results');
            
            if (!searchBar.contains(e.target)) {
                searchResults.style.display = 'none';
            }
        });

        // Add styles for search results
        const style = document.createElement('style');
        style.textContent = `
            .search-results {
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: white;
                border-radius: 4px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                margin-top: 0.5rem;
                max-height: 400px;
                overflow-y: auto;
                display: none;
                z-index: 1000;
            }
            
            .search-item {
                padding: 1rem;
                border-bottom: 1px solid #eee;
                cursor: pointer;
                transition: background-color 0.2s;
                display: flex;
                align-items: center;
                justify-content: space-between;
            }
            
            .search-item:hover {
                background-color: #f8f8f8;
            }
            
            .search-item .item-details h4 {
                margin: 0;
                font-weight: 500;
            }
            
            .search-item .item-meta {
                font-size: 0.8rem;
                color: #666;
            }
            
            .search-item .item-price {
                color: #000;
                font-weight: 500;
            }
            
            .no-results {
                padding: 1rem;
                text-align: center;
                color: #666;
            }
            
            .loading-text {
                padding: 1rem;
                text-align: center;
                color: #666;
            }
        `;
        document.head.appendChild(style);

        function filterMenu(category) {
            const menuItems = document.querySelectorAll('.menu-item');
            menuItems.forEach(item => {
                if (category === 'all') {
                    item.style.display = 'block';
                } else if (category === 'veg') {
                    item.style.display = item.classList.contains('veg') ? 'block' : 'none';
                } else if (category === 'non-veg') {
                    item.style.display = item.classList.contains('non-veg') ? 'block' : 'none';
                }
            });
        }
        
        document.addEventListener("DOMContentLoaded", function() {
            const searchBar = document.querySelector('.search-bar');
            if (searchBar) {
                searchBar.addEventListener('input', function() {
                    const query = this.value.toLowerCase();
                    const menuItems = document.querySelectorAll('.menu-item');
                    menuItems.forEach(item => {
                        const title = item.querySelector('.menu-title').textContent.toLowerCase();
                        item.style.display = title.includes(query) ? 'block' : 'none';
                    });
                });
            }
        });
        
        document.addEventListener("DOMContentLoaded", function () {
            
            feather.replace(); // Ensure icons load properly
           
        
        
           
        
        });
        document.addEventListener("DOMContentLoaded", () => {
            feather.replace(); // Refresh feather icons to apply styles
            updateCartCount(); // Ensure cart count updates on page load
        });
        
        function redirectToCart() {
            window.location.href = "/cart"; // Redirect to cart page
        }
        
        // Function to add an item to the cart
        let cart = JSON.parse(localStorage.getItem("cart")) || []; // Load existing cart
        
        function addToCart(itemName, itemPrice) {
            let existingItem = cart.find(item => item.name === itemName);
    
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ name: itemName, price: itemPrice, quantity: 1 });
            }
    
            localStorage.setItem("cart", JSON.stringify(cart)); // Save cart to localStorage
            updateCartCount(); // Update the cart count on UI
        }
        function updateCartCount() {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            let cartCount = document.getElementById("cart-count");
    
            if (cart.length > 0) {
                cartCount.style.display = "flex"; // Show badge when items are added
                cartCount.innerText = cart.length;
            } else {
                cartCount.style.display = "none"; // Hide when empty
            }
        }
        
        // Run on page load
        document.addEventListener("DOMContentLoaded", () => {
            feather.replace(); // Refresh feather icons
            updateCartCount(); // Update count on load
        });
    </script>
    
</body>
</html>